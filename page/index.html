<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utopia Engine</title>
</head>
<body>
    <h1>Utopia Engine</h1>
    <input id="new_game" type="button" value="New Game">
</body>
<script>
    document.getElementById("new_game").onclick = newGame;

    function newGame () {
        // window.location.href = "/g/" + gameid
        // window.location.href = "/api/newgame";

        let gameid;

        fetch('https://utopiaengine.herokuapp.com/api/newgame', {
          method: 'POST', // or 'PUT'
          mode: 'no-cors', // no-cors, *cors, same-origin
          headers: {
            'Content-Type': 'application/json',
          },
        //   body: JSON.stringify({action: 'doRest', param: {}}),
        })
        .then((response) => response.text() )
        .then((data) => {
            data = data ? JSON.parse(data) : {}
            console.log('New Game id:', data);
            gameid = data.gameId;
            console.log('redirecting')
            window.location.href = '/g/' + gameid;
        })
        .catch((error) => {
          console.error('Error:', error)
        });
    }

</script>
<!-- <script src="index.js"></script> -->
<!-- </html><script src="engine.js"></script> -->